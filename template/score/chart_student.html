{% extends 'dashbord_student/student_base.html' %}
{% block content %}
<div class="col-lg-9">
    <!-- Card -->
    <div class="card" style="min-height: 700px; padding: 20px;">
        <!-- Header -->
        <div class="card-header border-bottom">
            <h5 class="card-header-title">جزئیات امتیازات</h5>
        </div>
        <!-- End Header -->

        <div style="width: 100%; max-width: 1000px; height: auto; margin: auto;">
            <canvas id="myChart"></canvas>
        </div>

        <!-- اضافه کردن فونت فارسی از CDN -->
        <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@latest/dist/font-face.css" rel="stylesheet" type="text/css" />

        <style>
            @media (max-width: 768px) {
                canvas#myChart {
                    width: 100% !important;
                    height: 300px !important; /* ارتفاع کمتر برای گوشی */
                }
                .card {
                    padding: 10px;
                }
            }
            canvas#myChart {
                width: 100% !important;
                height: 500px !important;
            }
        </style>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',  // نوع نمودار خطی
                data: {
                    labels: {{ dates|safe }},  // تاریخ‌ها
                    datasets: [{
                        label: 'امتیازات در طول زمان',
                        data: {{ scores|safe }},  // امتیازها
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: {
                    maintainAspectRatio: false, // تغییر ابعاد خودکار
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'تاریخ',
                                font: {
                                    family: 'Vazir',
                                    size: 14,
                                    weight: 'bold',
                                },
                                color: '#000'
                            },
                            ticks: {
                                font: {
                                    family: 'Vazir',
                                    size: 12,
                                    weight: 'bold',
                                },
                                color: '#000'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'امتیاز',
                                font: {
                                    family: 'Vazir',
                                    size: 14,
                                    weight: 'bold',
                                },
                                color: '#000'
                            },
                            ticks: {
                                font: {
                                    family: 'Vazir',
                                    size: 12,
                                    weight: 'bold',
                                },
                                color: '#000'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                font: {
                                    family: 'Vazir',
                                    size: 14,
                                    weight: 'bold',
                                },
                                color: '#000'
                            }
                        }
                    }
                }
            });
        </script>
    </div>
    <!-- End Card -->
</div>
{% endblock %}
